function n(n,t=document){return n instanceof Node?[n]:t.querySelectorAll(n)}function t(n,t=document){return n instanceof Node?n:t.querySelector(n)}function o(){return document.createDocumentFragment()}function e(n){return"SCRIPT"===n.tagName&&"fluor"===n.type}function c(...n){return n.map(n=>Array.isArray(n)?n.map(n=>c(n)).join(" "):"string"==typeof n?n:c(...Object.entries(n).reduce((n,[t,o])=>o?n.concat(t):n,[]))).join(" ")}function r(n,t){return n.split(".").reduce((n,t)=>n[t],t)}function f(n,t,o){return e=n,Boolean(e&&e.constructor&&e.call&&e.apply)?n(t,o):n;var e}const s=window.requestAnimationFrame;function u(n,t){const o=[n];for(;o.length;){const n=o.shift();if(!1!==t(n))for(const t of n.children)o.push(t)}}function i(n){let t=n;for(;t;){if(g.t.has(t))return g.t.get(t);t=t.parentElement}return null}function a(n){return Array.isArray(n)?(...t)=>n.forEach(n=>n(...t)):n}function l(n,t,c){if("TEMPLATE"!==t.tagName)return void 0;if(r(n.value,c)){if(t.o)return t.o.forEach(n=>n.render());const n=o(),c=t.content.cloneNode(!0);t.o=[];for(const o of[...c.children])e(o)||(t.o.push({child:o}),n.append(o));t.parentNode.insertBefore(n,t.nextSibling);for(const n of t.o){const{child:t}=n,o=b(t);n.molecule=o,y(t),o.render()}}else t.o&&($(t.o),t.o=null)}function d(n,t,c){if("TEMPLATE"!==t.tagName)return void 0;const[f,s]=n.value.split(/\s+in\s+/),u=r(s,c),i=o();if(t.s)$(t.s),t.s=null,d(n,t,c);else{t.s=[];for(let n=0,o=u.length;n<o;n++){const o=t.content.cloneNode(!0);for(const c of[...o.children])e(c)||(t.s.push({index:n,child:c}),i.append(c))}t.parentNode.insertBefore(i,t.nextSibling);for(const n of t.s){const{index:t,child:o}=n,e=b(o);e.setup({$index:t,[f]:u[t]}),n.molecule=e,y(o),e.render()}}}function p(n,t,o){const[e,c]=n.value.split(":"),f=r(c,o);switch(f){case!0:t.setAttribute(e,"");break;case!1:t.removeAttribute(e);break;default:t.setAttribute(e,f)}}function h(o,e){const h={},b=n=>Object.assign(h,n),m=e?i(e.parentNode):null;function $(n=!0){const t=i(e);u(e,o=>{const e=i(o);if(e!==t)return n&&e.render(n),!1;for(const n of o.attributes)switch(n.name){case"f-text":o.textContent=r(n.value,h);break;case"f-html":o.innerHTML=r(n.value,h);break;case"f-if":l(n,o,h);break;case"f-each":d(n,o,h);break;case"f-bind":p(n,o,h)}})}function w(n,t){b("object"==typeof n?Object.entries(n).reduce((n,[t,o])=>({...n,[t]:f(o,h[t],h)}),{}):{[n]:f(t,h[n],h)})}function g(t,o,c=null){return r=>{(c?n(c,e):[r.currentTarget]).forEach(n=>n.classList[t](o))}}function y(n){return(t,o=null)=>()=>{h[t][n](f(o,h[t],h)),$()}}return m&&b({$parent:m.$data}),{set:(n,t)=>()=>{w(n,t),$()},toggle:n=>()=>{w(n,n=>!n),$()},setup(n,t){w(n,t)},on(t,o,c){const r=a(c);for(const c of n(o,e))i(c).$root===e&&c.addEventListener(t,r)},every(n,t){const o=a(t),e=1e3*n;let c=Date.now();const r=()=>{Date.now()-c<e||(c+=e,o()),s(r)};s(r)},delay:(n,t)=>()=>{const o=a(t),e=1e3*n;let c=Date.now();const r=()=>{Date.now()-c<e?s(r):o()};s(r)},addClass:(n,t=null)=>g("add",n,t),removeClass:(n,t=null)=>g("remove",n,t),toggleClass:(n,t=null)=>g("toggle",n,t),append:y("push"),prepend:y("unshift"),pop:y("pop"),shift:y("shift"),withEvent:n=>t=>n(t)(),render:$,classes:c,$data:h,$id:o,$root:e,$parent:m,$:(t,o=e)=>n(t,o),$$:(n,o=e)=>t(n,o),u:[]}}function b(n){const t=h(Math.random().toString(36).slice(2),n);return g.t.set(n,t),t}function m(n){for(const t of n.u)t.parentNode.removeChild(t)}function $(n){const t=[...new Set(n.map(n=>n.molecule))];for(const n of t)n.$root.parentNode&&n.$root.parentNode.removeChild(n.$root),m(n)}const w=Object.keys(h()).filter(n=>!n.startsWith("__"));function g(n,t){const o=Array.from(g.t.values()).find(t=>t.$id===n);t(o),o.render(!1)}function y(n){const t=[];u(n,n=>{e(n)&&t.push(n)});for(const n of t){const t=n.parentNode,o=g.t.get(t)||b(t);n.i=o}const c=o();for(const n of t){const t=n.i,o=document.createElement("script"),e=`RunFluor("${t.$id}", ({${w.join(",")}}) => {${n.textContent}})`;o.textContent=e,n.parentNode.removeChild(n),t.u.push(o),c.appendChild(o)}document.body.appendChild(c)}window.RunFluor=g,g.t=new Map,async function(){await new Promise(n=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",n):n()}),y(document.body)}();export default function v(n,o){g(b(t(n)).$id,o)}