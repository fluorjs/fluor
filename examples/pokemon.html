<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fluor 2</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body class="p-8">
    <div class="pokemons">
      <h1 class="text-lg font-bold mb-4">Pokemon API</h1>

      <button>Load Pokemon</button>

      <ul>
        <template data-fluor-list="pokemon">
          <li class="pokemon">
            <a data-fluor-href="url" class="text-blue-900 underline">
              {{name}}
            </a>
          </li>
        </template>
      </ul>
    </div>

    <script type="fluor" data-fluor-selector=".pokemons">
      let pokemon = variable([])

      on("click", "button", set(pokemon, fetchRandomPokemon))

      bind({ pokemon })

      async function fetchRandomPokemon() {
        const random = Math.random() * 101
        const response = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=10&offset=${random}`)
        const json = await response.json()
        return json.results
      }
    </script>

    <script type="fluor" data-fluor-selector=".pokemon">
      bind({
        name: variable($data.name),
        url: variable($data.url),
      })
    </script>

    <script type="module" src="../src/fluor.js?init"></script>
  </body>
</html>
